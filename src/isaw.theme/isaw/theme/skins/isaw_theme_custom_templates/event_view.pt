<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">
<body>

<metal:content-core fill-slot="content-core">
        <div class="documentDescription" tal:condition="context/subtitle|nothing" tal:content="context/subtitle">subtitle</div>

        <div class="bio" tal:define="speaker context/speaker|nothing;
                                     affiliation context/speakerAffiliation|nothing;">
          <h2 tal:condition="speaker" tal:content="speaker">Speaker</h2>
          <h3 tal:condition="affiliation" tal:content="affiliation">Affiliation</h3>
        </div>

        <span class="visualClear"><!-- --></span>

        <metal:field use-macro="python:context.widget('text', mode='view')">
        Body text
        </metal:field>

        <div tal:condition="context/contactName|nothing">
          <h3>Contact</h3>
          <p><strong tal:content="context/contactName">Name</strong><span tal:condition="context/contactEmail|nothing" tal:content="string:, ${context/contactEmail}">email</span><span tal:condition="context/contactPhone|nothing" tal:content="string:, ${context/contactPhone}">phone</span>.</p>
        </div>

        <span class="visualClear"><!-- --></span>
        <script>
          $(function () {
            var $title = $('h1.documentFirstHeading');
            var $breadcrumb = $('span#breadcrumbs-current');
            var title_parts = $title.text().split(':');
            $title.text(title_parts[0]);
            if (title_parts.length > 1) {
              // Join remaining parts into a sub title
              $('<p class="subtitle"></p>').text(title_parts.slice(1).join(':')).insertAfter($title);
            }
            if ($breadcrumb.text().length > 70) {
              $breadcrumb.text($breadcrumb.text().substr(0,70).split(" ").slice(0, -1).join(" ") + '\u2026');
            }
          });
        </script>

</metal:content-core>

</body>
</html>
